/*! wayfinder 2016-08-10 */
var RR=function(parent,$){"use strict";var setup=function(){function toggleHeader(){var st=$(this).scrollTop(),$headerHeight=$header.height();isMobileDevice=$window.width()<1024?1:0,isMobileDevice||(st>lastScrollTop?st>$headerHeight&&$header.addClass("hide").removeClass("compact"):st<=$headerHeight?$header.removeClass("compact hide"):$header.addClass("compact")),lastScrollTop=st}var $window=$(window),$header=($("body"),$(".header")),isMobileDevice=$window.width()<768,lastScrollTop=0;$window.on("resize scroll",debounce(toggleHeader,250)),$window.on("resize scroll",debounce(function(){$("#main").css({height:$window.outerHeight()-$(".header").outerHeight()})},250)).trigger("resize"),$(".js-open-path").on("click",function(e){e.preventDefault();var $this=$(this);$this.data("path");TweenMax.staggerTo(".controls .col",.5,{autoAlpha:0,scale:.75,ease:Expo.easeOut},.1,function(){$(".action").addClass("show"),$(".levels").addClass("levels--open"),$(".levels .level").addClass("level--current"),$(".level__pins").addClass("level__pins--active")})}),$(".js-close-path").on("click",function(e){e.preventDefault(),$(".action").removeClass("show"),$(".levels").removeClass("levels--open"),$(".levels .level").removeClass("level--current"),$(".level__pins").removeClass("level__pins--active");var $this=$(this);$this.data("path");TweenMax.staggerTo(".controls .col",.5,{autoAlpha:1,scale:1,ease:Expo.easeOut,delay:.5},.1)})};return parent.listeners={setup:setup},parent}(RR||{},jQuery);jQuery(function($){RR.listeners.setup()});var RR=function(parent,$){"use strict";var $body=$("body"),$window=$(window),isMobileDevice=$window.width()<1024?1:0;$.fn.materialize=function(){return this.each(function(){function listener(){$(".material-select-wrapper").find(".material-label").removeClass("active"),TweenMax.to(".material-select-wrapper .card-wrapper",.5,{autoAlpha:0,scale:0,top:0,ease:Expo.easeIn,onComplete:function(){TweenMax.set(".material-select-wrapper .card-wrapper li",{opacity:0,top:-20})}}),$window.off("resize scroll",debounce(listener,250))}var $this=$(this),$label=$('<span class = "material-label"/>'),$arrow=$('<span class = "icon icon-chevron-down"/>'),$wrapper=$('<div class = "material-select-wrapper js-material-drop"/>'),$wrapperNative=$('<div class = "material-select-wrapper native js-material-drop"/>'),markup="";$this.hasClass("native")?$this.wrap($wrapperNative):$this.wrap($wrapper),$this.before($label).before($arrow).on("change",function(e){$label.text($this.find(":selected").text())}),$label.text($this.find(":selected").text()),markup+='<div class="card-wrapper"><ul>',$this.find("option").each(function(){var $that=$(this);markup+=$that.is(":selected")?'<li class="active"><button>'+$that.text()+"</button></li>":"<li><button>"+$that.text()+"</button></li>"}),markup+="</ul></div>",$this.after(markup),$this.parent().on("click",".material-label",function(){var $this=$(this),$parent=$this.parent(),$card=$this.parent().find(".card-wrapper");if($parent.hasClass("native")&&isMobileDevice)return!1;if($this.hasClass("active"))TweenMax.to($card,.25,{autoAlpha:0,scale:.75,ease:Expo.easeOut,onComplete:function(){TweenMax.set($card.find("li"),{opacity:1,top:0})}});else{var activeInd=$card.find(".active").index(),materialDropPos=$(".material-select-wrapper .card-wrapper li").outerHeight()*activeInd;TweenMax.to($card,.25,{autoAlpha:1,scale:1,top:-materialDropPos,ease:Expo.easeOut}),TweenMax.staggerTo($card.find("li"),1,{opacity:1,top:0,ease:Expo.easeOut,delay:.3},.1)}$this.toggleClass("active"),$card.addClass("active").mCustomScrollbar("scrollTo",0),$window.on("resize scroll",debounce(listener,250))}).on("click","button",function(e){e.preventDefault();var $this=$(this),$cardWrapper=$this.parents(".card-wrapper"),$materialSelectWrapper=$this.parents(".material-select-wrapper"),$parent=$this.parent(),ind=$parent.index()+1,selectedValue=$materialSelectWrapper.find("select option:nth-child("+ind+")").val();return(!$parent.hasClass("native")||!isMobileDevice)&&($materialSelectWrapper.find(".active").removeClass("active"),$parent.addClass("active"),TweenMax.to($cardWrapper,.25,{autoAlpha:0,scale:0,ease:Expo.easeIn,onComplete:function(){TweenMax.set($cardWrapper.find("li"),{opacity:0,top:-20})}}),$materialSelectWrapper.find("select").val(selectedValue).trigger("change").end().find(".material-label").text($this.text()),void $window.off("resize scroll",listener,250))}),$this.next().mCustomScrollbar({setTop:0,setHeight:250,theme:"minimal-dark",scrollbarPosition:"outside"}),$body.on("click",function(e){var $eTarget=$(e.target),$materialSelectWrapper=$(".material-select-wrapper"),$cardWrapper=$(".material-select-wrapper .card-wrapper");$eTarget.hasClass("material-select-wrapper")||$eTarget.parents(".material-select-wrapper").length||($materialSelectWrapper.find(".material-label").removeClass("active"),TweenMax.to($cardWrapper,.25,{autoAlpha:0,scale:0,top:0,ease:Expo.easeInOut,onComplete:function(){TweenMax.set($cardWrapper.find("li"),{opacity:0,top:-20})}}),$window.off("resize scroll",debounce(listener,250)))})})};var setup=function(){var $rippleEffect=$("button, .cta");$rippleEffect.on("click",function(e){var $this=$(this);$this.hasClass("disabled")||ripple(e,$this)});var $materialMenu=$(".material-menu"),tl=new TimelineMax;tl.to(".material-menu .top",.2,{top:4,ease:Expo.easeInOut}),tl.to(".material-menu .bot",.2,{top:-4,ease:Expo.easeInOut},"-=0.2"),tl.to(".material-menu .mid",.2,{opacity:0,ease:Expo.easeInOut}),tl.to(".material-menu .top",.2,{rotation:45,ease:Expo.easeInOut},"-=0.2"),tl.to(".material-menu .bot",.2,{rotation:-45,ease:Expo.easeInOut},"-=0.2"),tl.pause(),$materialMenu.on("click",function(){var $this=$(this);$this.toggleClass("active"),$this.hasClass("active")?tl.reverse():tl.play()}),$(".floating-input").each(function(){var $this=$(this);$this.wrap('<div class="floating"></div>').before('<span class="placeholder">'+$this.attr("placeholder")+"</span>").attr("placeholder","").on("focus",function(){var $this=$(this);$this.parent().addClass("focus")}).on("blur",function(){var $this=$(this);""===$this.val()&&$this.parent().removeClass("focus")}),void 0!==$this.data("hint")&&""!==$this.data("hint")&&$this.after('<span class="hint"><strong>*Hint: </strong>'+$this.data("hint")+"</span>"),$(".placeholder").on("click",function(){$(this).next().focus()})}),$(".progress").each(function(){var $this=$(this),$progressBar=$this.find(".progress-bar");void 0!==$progressBar.data("value")&&$progressBar.css({width:$progressBar.data("value")+"%"})}),$(".material").materialize();var $card=$(".card");$card.length&&($card.each(function(i,el){var $this=$(el),cardWatcher=scrollMonitor.create(el);cardWatcher.enterViewport(function(){$this.addClass("show",this.isInViewport),$this.removeClass("up",this.isAboveViewport)}),cardWatcher.exitViewport(function(){$this.removeClass("show",this.isInViewport),$this.toggleClass("up",this.isAboveViewport)})}),scrollMonitor.recalculateLocations()),$window.on("resize",debounce(function(){isMobileDevice=$window.width()<1024},250))},toasterInd=0,toaster=function(msg){var popupAlert=doT.template($("#toaster-template").html()),obj={ind:toasterInd,message:msg};$(".toaster-wrap").length||$("#main").after('<div class="toaster-wrap" />'),$(".toaster-wrap").append(popupAlert(obj));var toaster=".toaster"+toasterInd;TweenMax.to(toaster,.75,{scale:1,ease:Expo.easeOut}),TweenMax.to(toaster,.75,{scale:0,ease:Expo.easeOut,delay:5,onComplete:function(){$(toaster).remove()}}),$(toaster).on("click",function(e){e.preventDefault(),TweenMax.to($(this),.75,{scale:0,ease:Expo.easeOut,onComplete:function(){$(toaster).remove()}})}),toasterInd++},inc=0,ripple=function(e,el){if($(".no-svg").length)return!1;var svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),g=document.createElementNS("http://www.w3.org/2000/svg","g"),circle=document.createElementNS("http://www.w3.org/2000/svg","circle"),x=e.offsetX,y=e.offsetY;svg.setAttributeNS(null,"class","ripple ripple"+inc),g.setAttributeNS(null,"transform","translate("+x+", "+y+")"),circle.setAttributeNS(null,"r",parseInt(el.outerWidth())+x),svg.appendChild(g),g.appendChild(circle),el.append(svg);var $ripple=el.find(".ripple"+inc);TweenMax.from($ripple.find("circle"),1.5,{attr:{r:0},opacity:.75,ease:Expo.easeOut,onComplete:function(){$ripple.remove()}}),inc++};return parent.materialDesign={setup:setup,ripple:ripple,toaster:toaster},parent}(RR||{},jQuery);jQuery(function($){"use strict";RR.materialDesign.setup()});var RR=function(parent,$){"use strict";function checkNavHeight(){var $lvl1=$("#primary-nav .lvl1"),$visibleArea=$window.outerHeight()-$(".header").outerHeight();$lvl1.outerHeight()>$visibleArea?$lvl1.css({height:$visibleArea}):$lvl1.css({height:"auto"})}var $dropdownList,el=$("#primary-nav"),mobileMenuMarkup='<button class="menu js-mobile-menu"><span class="line top"></span><span class="line mid"></span><span class="line bot"></span></button>',subNavMarkup='<button class="sub-nav js-sub-nav icon-arrow"><span class="vh">Sub-navigation</span></button>',$lvl1=el.find(".lvl1"),$lvl2=el.find(".lvl2"),$lvl3=el.find(".lvl3"),$set=$lvl1.add($lvl2).add($lvl3),$window=$(window),isMobileDevice=$window.width()<1024,setup=function(){el.prepend(mobileMenuMarkup),$lvl1.find("ul").each(function(){$(this).before(subNavMarkup)});var tl=new TimelineMax;tl.to(el.find(".top"),.2,{top:4,ease:Expo.easeInOut}),tl.to(el.find(".bot"),.2,{top:-4,ease:Expo.easeInOut},"-=0.2"),tl.to(el.find(".mid"),.2,{opacity:0,ease:Expo.easeInOut}),tl.to(el.find(".top"),.2,{rotation:45,ease:Expo.easeInOut},"-=0.2"),tl.to(el.find(".bot"),.2,{rotation:-45,ease:Expo.easeInOut},"-=0.2"),tl.pause(),$dropdownList=el.find("ul li");var $mobileMenu=$(".js-mobile-menu"),$subNav=$(".js-sub-nav");TweenMax.killTweensOf($dropdownList),$mobileMenu.on("click",function(e){e.preventDefault(),e.stopPropagation();var $this=$(this);$this.hasClass("active")?($this.removeClass("active"),$set.find(".icon-arrow.active").removeClass("active"),tl.reverse(),TweenMax.to($lvl1,.25,{autoAlpha:0,scale:.75,ease:Expo.easeOut,onComplete:function(){TweenMax.set($lvl1.find("> li"),{opacity:0,top:-30}),$lvl2.hide(),$lvl3.hide()}})):($this.addClass("active"),tl.play(),$lvl1.slideDown({duration:750,easing:"easeOutExpo",queue:!1}),TweenMax.to($lvl1,.25,{scale:1,autoAlpha:1,ease:Expo.easeOut,onComplete:function(){TweenMax.staggerTo($lvl1.find("> li"),1,{opacity:1,top:0,ease:Expo.easeOut},.05),checkNavHeight()}}))}),$subNav.on("touchend, click",function(){var $this=$(this),$grandParent=$this.parent().parent(),$next=$this.next();$this.hasClass("active")?$next.hasClass("lvl2")?($set.find(".icon-arrow.active").removeClass("active"),$this.removeClass("active").next().find(".icon-arrow.active").removeClass("active"),$lvl3.slideUp({duration:500,easing:"easeOutExpo"}),$next.slideUp({duration:500,easing:"easeOutExpo",queue:!1,complete:function(){TweenMax.set($lvl2.find("li"),{opacity:0,top:-30}),checkNavHeight()}})):($this.removeClass("active"),$next.slideUp({duration:750,easing:"easeOutExpo",queue:!1,complete:function(){TweenMax.set($next.find("li"),{opacity:0,top:-30}),checkNavHeight()}})):($grandParent.hasClass("lvl1")?$lvl1.find(".icon-arrow.active").removeClass("active").next().slideUp({duration:750,easing:"easeOutExpo"}):$grandParent.hasClass("lvl2")&&$lvl2.find(".icon-arrow.active").removeClass("active").next().slideUp({duration:750,easing:"easeOutExpo"}),$this.addClass("active"),$next.slideDown({duration:750,easing:"easeOutExpo",queue:!1,complete:checkNavHeight}),TweenMax.staggerTo($next.find("> li"),1,{opacity:1,top:0,ease:Expo.easeOut},.1))}),el.on("click",".no-link",function(e){e.preventDefault();var $this=$(this),$next=$this.next();$next.trigger("click"),RR.materialDesign.ripple(e,$this)}).on("click",".lvl2 a",function(e){var $this=$(this),$next=$this.next();"#"===$this.attr("src")&&$this.parent().hasClass("no-link")&&$next.trigger("click"),RR.materialDesign.ripple(e,$this)}).on("mouseover",".lvl1 a",function(){var $this=$(this),$next=$this.next();isMobileDevice||$next.hasClass("active")||$next.trigger("click")}).on("mouseout",".lvl1 a",function(){var $this=$(this),$next=$this.next();isMobileDevice||$next.hasClass("active")||$next.trigger("click")});var $body=$("body");$body.on("click",function(e){var $eTarget=$(e.target);$eTarget.hasClass("nav")||$eTarget.parents(".nav").length||($mobileMenu.hasClass("active")&&$mobileMenu.trigger("click"),$(".js-sub-nav.active").trigger("click"))}),$window.on("resize",debounce(function(){isMobileDevice=$window.width()<1024,isMobileDevice?($mobileMenu.removeClass("active"),$set.find(".icon-arrow.active").removeClass("active"),tl.reverse(),TweenMax.to($lvl1,.25,{scale:0,ease:Expo.easeOut,onComplete:function(){TweenMax.set($lvl1.find("> li"),{opacity:0,top:-30}),$lvl2.hide(),$lvl3.hide()}})):($lvl1.show(),TweenMax.set($lvl1,{scale:1}),TweenMax.set($lvl1.find("li"),{opacity:1,top:0}),$(".js-sub-nav.active").trigger("click")),checkNavHeight()},250)),$window.on("scroll",debounce(function(){isMobileDevice=$window.width()<1024,isMobileDevice||$(".js-sub-nav.active").trigger("click")},250))};return parent.mobileMenu={setup:setup},parent}(RR||{},jQuery);jQuery(function($){RR.mobileMenu.setup()});